function modalClose(){modal__message.classList.contains("modal__error")&&modal__message.classList.remove("modal__error"),modal__message.classList.contains("modal__show")&&modal__message.classList.remove("modal__show"),modal__map.classList.contains("modal__show")&&modal__map.classList.remove("modal__show"),modal__overlay.classList.remove("modal__show-overlay")}function init(){var e=new ymaps.Map("map__container",{center:[55.68698,37.529654],zoom:17}),a=new ymaps.Placemark(e.getCenter(),{balloonContentBody:["<address>Улица Стороителей, 15</address>"].join("")},{preset:"islands#redIcon"});e.geoObjects.add(a)}var contacts__button=document.querySelector(".contacts__button"),contacts__link=document.querySelector(".contacts__link"),modal__message=document.querySelector(".modal__message"),message__close=modal__message.querySelector(".modal__close"),message__button=modal__message.querySelector(".message__button"),modal__map=document.querySelector(".modal__map"),map__close=modal__map.querySelector(".modal__close"),modal__overlay=document.querySelector(".modal__overlay"),form=modal__message.querySelector("form"),control__name=modal__message.querySelector("[name=control__name]"),control__email=modal__message.querySelector("[name=control__email]"),isStorageSupport=!0,name="",email="";try{name=localStorage.getItem("name"),email=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contacts__button.addEventListener("click",function(e){e.preventDefault(),modal__overlay.classList.add("modal__show-overlay"),modal__message.classList.add("modal__show"),"null"!==name&&(control__name.value=name),"null"!==email&&(control__email.value=email),control__name.focus()}),contacts__link.addEventListener("click",function(e){e.preventDefault(),modal__overlay.classList.add("modal__show-overlay"),modal__map.classList.add("modal__show")}),message__close.addEventListener("click",function(e){e.preventDefault(),modalClose()}),map__close.addEventListener("click",function(e){e.preventDefault(),modalClose()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalClose())}),form.addEventListener("submit",function(e){isStorageSupport&&(localStorage.setItem("name",control__name.value),localStorage.setItem("email",control__email.value))}),message__button.addEventListener("click",function(e){var a=form.querySelectorAll("input:invalid");a.length>0&&modal__message.classList.add("modal__error")}),ymaps.ready(init);